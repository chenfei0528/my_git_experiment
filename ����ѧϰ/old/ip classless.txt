ip classless

ip classless(无类)和no ip classless(有类classful)

　　什么是有类：no ip classless 或 classful
　　严格按照TCP/IP ABCD给IP地址分类,子网掩码只在所定义的路由器内有效，掩码信息到不了其它路由器；

　　什么是无类：ip classless 
　　不按照按照TCP/IP ABCD给IP地址分类,掩码任何时候都和IP地址成对地出现;

　　IP classless的作用：
　　1、ip classless这条命令是作用于路由转发进程的，告诉路由器工作在无类环境下
　　2、它能让路由器超越有类网络的边界而根据最长匹配条目来转发数据包；
　　3、当目的网络没有出现在路由表中时通过默认路由转发数据包，而不是简单的丢弃
　　4、如果路由器工作在有类环境下，当目的网络出现在路由表中，但没有具体的网络 匹配时，防火墙将丢弃数据包。

　　例如：

　　ip classless命令最早在cisco IOS 10.0被介绍，在cisco IOS 11.3后。ip classless就缺省有效了(enable)。

　　为什么呢？
　　原因是这样的，当在路由器中使用了classful的路由协议(如：RIP)时,而在路由表里有子网时，问题就出现了。

　　当no ip classless的时候，假设现在路由器里有10.0.0.0/8,10.1.0.0/16,10.2.0.0/16的路由记录，这时路由器收到了一个目的地为10.4.0.0/16的IP包，路由器发现10.4.0.0/16不在路由表中，那么这个包将被路由器丢弃。即使有缺省路由也没有用。

　　现在假设 ip classless命令被启动了，那么这个10.4.0.0/16包将怎样被转发呢？它将会按照10.0.0.0/8的路由记录来转发这个包。因为它是10.4.0.0/16的超网。当然，如果路由器里连这个10.0.0.0/8的路由记录也不存在，10.4.0.0/16的包就会按照缺省路由来

　　总结：
       加一条ip classless命令，那么路由器成为无类路由环境，当目的数据包到达时，不进行有类匹配，而是进行无类匹配，即进行最长匹配原则；当用最长匹配时不在路由表内，那么路由器将把它交给默认路由，通过默认路由，把数据包送出。

       使用有类路有，当一个路由器收到一个数据包，而它的目的地址在路由表中不存在的话，它就会丢弃这个数据包。如果你使用了缺省路由，就必须使用ip classless命令，因为远端子网并不存在于你的路由表中。